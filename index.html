<!doctype html>
<html lang="en" manifest="cache.manifest"> <!--  -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tournafaux - Malifaux tournament planner</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
</head>
<body>


  <div class="container">
    <h1>Tournament planner</h1> <!-- <h1 style="color:red; background-color:yellow">No cache!</h1> -->
    <div class="row">
      <div class="col-md-9">
        <div id="tournament-nav"></div>
        <div class="page"></div>
        <hr/>
      </div>
      <div class="col-md-3">
      <p>
          Hi! My name is Bennie, <a href="http://wyrd-games.net/community/user/20217-egoon/">egoon on the Wyrd forums</a>, and I'm a henchman in Stockholm, Sweden. I created this tournament planner on my spare time, for fun. If you have questions, issues, feedback or want to support me in this project in some other way, please see the links below. Cheers!
        </p>
        <p><a href="https://github.com/egoon/tournafaux/wiki">Wiki</a></p>
        <!--<p><a href="">Feedback (Wyrd forum)</a></p>-->
        <p><a href="https://github.com/egoon/tournafaux/issues">
        Bugs and Feature requests (Github)</a></p>
        <p>
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
          <input type="hidden" name="cmd" value="_s-xclick">
          <input type="hidden" name="hosted_button_id" value="CKC9L6HWPSVEC">
          <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
          <img alt="Donate!" title="Donate!" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
        </form>

        </p>
      </div>
    </div>
  </div>

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js" type="text/javascript"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.7/backbone.localStorage-min.js"></script>
 
  <script type="text/template" id="tournament-nav-template">
    <ul class="nav nav-tabs">
      <li class="active"><a href="#">Settings</a></li>
      <li><a href="game">Profile</a></li>
      <li><a href="#">Messages</a></li>
    </ul>
  </script>

  <script type="text/template" id="tournament-settings-template">
  	<h4>Tournament settings</h4>
    <form class="form-inline tournament-settings-form" role="form">
      <div class="form-group">
        <label for="rounds">Rounds</label>
        <input class="form-control " id="rounds" name="rounds" type="text" value="<%= settings.get('rounds') %>" />
      </div>  
      <table class="table table-striped">
        <thead>
          <tr><th>Player name</th><th>Remove</th</tr>
        </thead>
        <tbody id="player-table">
          
          <% players.each(function(player) { %>
            <tr>
              <td><%= player.get('name') %></td>
              <td><button type="button" class="btn btn-danger removePlayer" id="<%=player.id %>">X</button></td> 
            </tr>
          <% }); %>
          <tr>
            <td><input id="new-player" class="form-control" name="player" type="text" />
            </td><td></td>
          </tr>
        </tbody>
      </table>
      <button type="button" id="generate-round" class="btn btn-primary" <%= parseInt(settings.get('rounds')) >= players.length ? "disabled" : "" %>>Generate round 1</button>
      
    </form>
  	
  </script>

  <script type="text/template" id="tournament-round-template">
      <h4>Round <%=number %></h4>
      <div class="row">
        <div class="col-md-5">
          <table class="table table-striped" style="width:auto">
            <theader>
              <tr><th>Table</th><th>Player 1</th><th>VP</th><th>VP</th><th>Player 2</th></tr>
            </theader>
            <tbody>
              <% _.each(tables, function(table) { %>
                <tr>
                  <td><%= table.number %></td>
                  <td><%= table.player1name %></td>
                  <td><input id="<%= table.player1id %>" value="<%= table.player1vp %>" class="form-control" 
                    style="width:50px" <%=table.player2id == '0' || table.player1id == '0' ? "disabled": "" %> /></td>
                  <td><input id="<%= table.player2id %>" value="<%= table.player2vp %>" class="form-control" 
                    style="width:50px" <%=table.player2id == '0' || table.player1id == '0' ? "disabled": "" %> /></td>
                  <td><%= table.player2name %></td>
                  
                </tr>
              <% }); %>
            <tbody>
          </table>
          <div <%= parseInt(settings.get('rounds')) >= parseInt(number) ? 'style="display:none"' : "" %> >
          <button type="button" id="generate-rounds" class="btn btn-primary">Generate round <%= parseInt(number) + 1 %></button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="standings"></div>
        </div>
      </div>
  </script>

  <script type="text/template" id="tournament-standings-template">
      
    <table class="table table-striped" style="width:auto">
      <theader>
        <tr><th>#</th><th>Player</th><th>TP</th><th>VP Diff</th><th>VP</th></tr>
      </theader>
      <tbody>
        <% var i = 1;
        _.each(players, function(player) { %>
          <tr>
            <td><%= i %></td>
            <td><%= player.get('name') %></td>
            <td><%= player.getTotalTp() %></td>
            <td><%= player.getVpDiff() %></td>
            <td><%= player.getTotalVp() %></td>
          </tr>
        <% ++i; }); %>
      <tbody>
    </table>
  </script>

  <script type="text/template" id="tournament-no-round-template">
      <h4>Round <%=number %> does not exist</h4>
      Sorry!
  </script>

  <script src="tournafaux.js"></script>

</body>
</html> 